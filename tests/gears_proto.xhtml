<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>dom inline proto access</title>

		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
		<meta http-equiv="Pragma" content="no-cache"/>
		<meta http-equiv="Expires" content="0"/>
		<meta charset="utf-8"/>
		<script type="text/javascript" 
			src="https://rawgit.com/andreasplesch/cobweb/master/stable/2/2.3ap/cobweb.js">
		</script>
		<script type="text/javascript" 
			src="../cobweb/cobweb_dom.js">
		</script>
		<link rel="stylesheet" type="text/css"
			href="https://rawgit.com/create3000/cobweb/master/cobweb.js/cobweb.css"/>
	
<style>
html, body {
	margin: 0px;
	padding: 0px;
	border: 0px;
	width: 100%;
	height: 100%;
	overflow: hidden;
}
body {
	background: black;
	color: white;
}
X3DCanvas {
	background: #414141;
	width: 600px;
	height: 400px;
}
.fallback {
	display: block;
	margin: 300px 0 0 0;
	text-align: center;
}
</style>

</head>

<body>
	<X3DCanvas>
		<X3D>
			<Scene>

			<ExternProtoDeclare name='Gear' url='"https://raw.githubusercontent.com/andreasplesch/Library/master/Examples/Gears/gears.x3d#Gear"'>
				<field accessType='inputOutput' type='SFFloat' name='teeth' value='10'/>
				<field accessType='inputOutput' type='SFFloat' name='toothDepth' value='0.5'/>
				<field accessType='inputOutput' type='SFFloat' name='innerRadius' value='0.5'/>
				<field accessType='inputOutput' type='SFFloat' name='outerRadius' value='2'/>
				<field accessType='inputOutput' type='SFFloat' name='width' value='1'/>
				<field accessType='initializeOnly' type='SFFloat' name='creaseAngle' value='0.6'/>
			</ExternProtoDeclare>
			<Transform DEF='Gear_1'>
				<Shape>
					<Appearance>
						<Material diffuseColor='0.8 0.1 0'/>
					</Appearance>
					<ProtoInstance name='Gear' containerField='geometry'>
						<fieldValue name='teeth' value='20'/>
						<fieldValue name='toothDepth' value='0.7'/>
					</ProtoInstance>
				</Shape>
			</Transform>
			</Scene>
		</X3D>
		<p class="fallback">
			Your browser may not support all features required by Cobweb! You can use Firefox, <br/>
			because this is currently the choice of the choice. We will continuously keep you informed <br/>
			on technical developments and as soon as Cobweb is running in other browser too.
		</p>
	</X3DCanvas>
	outer radius [1 to 5]:
	<input id='outerRadius' min='1' max='5' step='0.01' type='range' value='2' oninput='update_oRad(event)' />
	<br />
</body>
<script>
	var gear = document.querySelector("ProtoInstance[name='Gear']");
	function update_oRad(e) {
		var r = event.target.value;
		var oRadField = gear.querySelector('fieldValue[name="outerRadius"]');
		if (oRadField === null) {
			oRadField = document.createElement('fieldValue');
			oRadField.setAttribute('name','outerRadius');
			oRadField.setAttribute('value', r);
			gear.appendChild(oRadField);
			return;
	   	}
		oRadField.setAttribute('value', r);
	}	
	
	
</script>
</html>
